<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.varc.brewnetapp.domain.document.query.mapper.DocumentMapper">

  <resultMap id="approvalResultMap" type="com.varc.brewnetapp.domain.document.query.dto.ApprovalDTO">
    <result property="kind" column="KIND"/>
    <result property="seq" column="SEQUENCE"/>
    <result property="positionName" column="NAME"/>
  </resultMap>

  <resultMap id="approverResultMap" type="com.varc.brewnetapp.domain.document.query.dto.ApproverDTO">
    <result property="positionName" column="NAME"/>
  </resultMap>


  <select id="selectApprovalList" resultMap="approvalResultMap">
    SELECT
           A.KIND,
           A.SEQUENCE,
           P.NAME
      FROM tbl_approval A
     INNER JOIN tbl_position P ON (A.position_code = P.position_code)
     ORDER BY A.KIND DESC, A.SEQUENCE ASC;
  </select>
  
  <select id="selectApproverList" resultMap="approverResultMap" parameterType="string">
    SELECT
           NAME
      FROM tbl_position
     WHERE NAME != 'STAFF'
  </select>
</mapper>